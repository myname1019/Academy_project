{% extends "board_base.html" %}

{% load static %}



{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />



<style>

    /* Swiper ìŠ¤íƒ€ì¼ */

    .swiper { width: 100%; height: 250px; }

    .swiper-slide {

        display: flex; flex-direction: column; align-items: center; justify-content: center;

        color: white; text-align: center; padding: 60px 20px;

    }

    .slide-1 { background-color: #002c40; }

    .slide-2 { background-color: #6c5ce7; }

    .slide-3 { background-color: #00b894; }

    .slide-4 { background-color: #d63031; }

    .slide-5 { background-color: #2d3436; }

    .swiper-pagination-bullet { background: white !important; }



    /* ğŸ’¡ ì»¤ìŠ¤í…€ í˜ì´ì§€ë„¤ì´ì…˜ ìŠ¤íƒ€ì¼ ì¶”ê°€ */

    .pagination-container {

        display: flex;

        justify-content: center;

        align-items: center;

        margin-top: 40px;

        gap: 10px;

    }

    .page-link-custom {

        color: #555;

        text-decoration: none;

        padding: 5px 10px;

        border-radius: 5px;

        font-weight: 500;

        transition: 0.2s;

    }

    .page-link-custom:hover { background-color: #f1f3f5; color: #6c5ce7; }

    .page-link-custom.active { background-color: #6c5ce7; color: white; }

    .page-link-custom.disabled { color: #ccc; cursor: not-allowed; }

    .page-link-custom.disabled:hover { background-color: transparent; color: #ccc; }

    .page-divider { color: #dee2e6; }

</style>



<section class="banner swiper mySwiper">

    <div class="swiper-wrapper">

        <div class="swiper-slide slide-1"><h1>ì„±ì¥ì˜ ì¦ê±°ì›€ì„ ê²½í—˜í•˜ì„¸ìš”</h1><p>ì‹¤ì „ ì§€ì‹ ğŸš€</p></div>

        <div class="swiper-slide slide-2"><h1>íŒŒì´ì¬ ë§ˆìŠ¤í„° ì½”ìŠ¤</h1><p>ğŸ</p></div>

        <div class="swiper-slide slide-3"><h1>ì‹ ê·œ íšŒì› ì´ë²¤íŠ¸</h1><p>ğŸ</p></div>

        <div class="swiper-slide slide-4"><h1>ì‹¤ì‹œê°„ 1:1 ë©˜í† ë§</h1><p>ğŸ’¬</p></div>

        <div class="swiper-slide slide-5"><h1>TikiTaka ì»¤ë®¤ë‹ˆí‹°</h1><p>ğŸ¤</p></div>

    </div>

    <div class="swiper-pagination"></div>

</section>



<main class="container my-5">

    {# --- ì „ì²´ ëª©ë¡ ë˜ëŠ” ê³¼ëª© ì„ íƒ/ê²€ìƒ‰ ì‹œ --- #}

    {% if request.GET.show == "all" or request.GET.subject or q %}

        <h2 class="fs-4 fw-bold mb-4">

            {% if request.GET.subject %}

                {{ subject_display }} ê°•ì˜ ëª©ë¡ ğŸ“š

            {% else %}

                ì „ì²´ ê°•ì˜ ëª©ë¡ ğŸš€

            {% endif %}

        </h2>

        

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">

            {% if course_list %}

                {% for course in course_list %}

                <div class="col">


                    <div class="card h-100 shadow-sm border-0"

                         style="cursor: pointer;"

                         onclick="location.href='/course/{{ course.id }}/'">



                        {# --- [ê¸°ëŠ¥ ë³µêµ¬] ì¸ë„¤ì¼ ì²´í¬ ë¡œì§ --- #}

                        {% if course.thumbnail %}

                            <img src="{{ course.thumbnail.url }}"

                                 class="card-img-top"

                                 style="aspect-ratio: 16/10; object-fit: cover;">

                        {% else %}

                            <img src="{% static 'images/default_thumbnail.png' %}"

                                 class="card-img-top"

                                 style="aspect-ratio: 16/10; object-fit: cover;">

                        {% endif %}



                        <div class="card-body p-3">

                            <h5 class="card-title fs-6 fw-bold text-truncate mb-2">

                                {{ course.title }}

                            </h5>

                            <p class="card-text text-muted small mb-2">

                                {{ course.teacher }}

                            </p>

                            <p class="card-text fw-bold m-0" style="color: #6c5ce7;">

                                {% if course.price > 0 %}

                                    â‚©{{ course.price }}

                                {% else %}

                                    ë¬´ë£Œ

                                {% endif %}

                            </p>


                        </div>

                    </div>

                </div>

                {% endfor %}

            {% else %}



                <div class="col-12 text-center text-muted py-5">ë“±ë¡ëœ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>

            {% endif %}

        </div>



        {# ğŸ’¡ í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€ (ê°•ì˜ ëª©ë¡ì´ ìˆì„ ë•Œë§Œ í‘œì‹œ) #}

        {% if is_paginated %}

        <div class="pagination-container">

            {% if prev_group_start %}

                <a href="?page={{ prev_group_start }}{% if request.GET.show %}&show={{ request.GET.show }}{% endif %}{% if request.GET.subject %}&subject={{ request.GET.subject }}{% endif %}" class="page-link-custom" title="{{ prev_group_start }}í˜ì´ì§€ë¡œ ì´ë™">

                    &laquo; ì´ì „

                </a>

            {% else %}

                <span class="page-link-custom disabled">&laquo; ì´ì „</span>

            {% endif %}



            <span class="page-divider">|</span>



            {% for i in custom_page_range %}

                {% if page_obj.number == i %}

                    <span class="page-link-custom active">{{ i }}</span>

                {% else %}

                    <a href="?page={{ i }}{% if request.GET.show %}&show={{ request.GET.show }}{% endif %}{% if request.GET.subject %}&subject={{ request.GET.subject }}{% endif %}" class="page-link-custom">{{ i }}</a>

                {% endif %}

            {% endfor %}



            <span class="page-divider">|</span>



            {% if next_group_start %}

                <a href="?page={{ next_group_start }}{% if request.GET.show %}&show={{ request.GET.show }}{% endif %}{% if request.GET.subject %}&subject={{ request.GET.subject }}{% endif %}" class="page-link-custom" title="{{ next_group_start }}í˜ì´ì§€ë¡œ ì´ë™">

                    ë‹¤ìŒ &raquo;

                </a>

            {% else %}

                <span class="page-link-custom disabled">ë‹¤ìŒ &raquo;</span>

            {% endif %}

        </div>

        {% endif %}





    {# --- ë©”ì¸ í™ˆ í™”ë©´ (ê³µì§€ì‚¬í•­ & ìµœê·¼ê²Œì‹œê¸€) --- #}

    {% else %}

        <div class="row g-4">

            <div class="col-md-6">

                <div class="p-4 border rounded-3 shadow-sm h-100 bg-white">

                    <div class="d-flex justify-content-between align-items-center mb-3">

                        <h3 class="fs-5 fw-bold m-0">ğŸ“¢ ê³µì§€ì‚¬í•­</h3>

                        <a href="{% url 'Board:notice_list' %}" class="text-muted small text-decoration-none">ë”ë³´ê¸° +</a>

                    </div>

                    <ul class="list-unstyled mb-0">

                        {% for post in notices %}

                            <li class="py-2 border-bottom">

                                <a href="#" class="text-decoration-none text-dark d-flex justify-content-between">

                                    <span>{{ post.title }}</span>

                                    <span class="text-muted small">{{ post.created_at|date:"m-d" }}</span>

                                </a>

                            </li>

                        {% empty %}

                            <li class="py-2 text-muted small">ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</li>

                        {% endfor %}

                    </ul>

                </div>

            </div>



            <div class="col-md-6">

                <div class="p-4 border rounded-3 shadow-sm h-100 bg-white">

                    <div class="d-flex justify-content-between align-items-center mb-3">

                        <h3 class="fs-5 fw-bold m-0">ğŸ’¬ ê²Œì‹œê¸€</h3>

                        <a href="{% url 'Board:community_list' %}" class="text-muted small text-decoration-none">ë”ë³´ê¸° +</a>

                    </div>

                    <ul class="list-unstyled mb-0">

                        {% for post in communities %}

                            <li class="py-2 border-bottom">

                                <a href="#" class="text-decoration-none text-dark d-flex justify-content-between">

                                    <span>{{ post.title }}</span>

                                    <span class="text-muted small">{{ post.author }}</span>

                                </a>

                            </li>

                        {% empty %}

                            <li class="py-2 text-muted small">ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>

                        {% endfor %}

                    </ul>

                </div>

            </div>

        </div>

    {% endif %}

</main>



<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>

    var swiper = new Swiper(".mySwiper", {

        loop: true,

        autoplay: { delay: 2000, disableOnInteraction: false },

        pagination: { el: ".swiper-pagination", clickable: true },

        speed: 800,

    });

</script>

{% endblock %}