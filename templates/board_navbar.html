{% load static %}

<style>
    /* 1. 화면 전체 여백 제거 */
    body, html {
        margin: 0 !important;
        padding: 0 !important;
    }

    /* 2. 헤더 전체 감싸는 영역 */
    header {
        position: sticky;
        top: 0;
        background: #fff;
        border-bottom: 1px solid #dee2e6;
        z-index: 1000;
        width: 100%;
    }

    /* --- 1층: 로고, 검색창, 로그인 (가로 정렬 핵심!) --- */
    .nav-top {
        max-width: 1200px;
        margin: 0 auto;
        height: 64px;
        display: flex;         /* 요소를 가로로 나란히 배치 */
        align-items: center;   /* 세로 중앙 정렬 */
        justify-content: space-between; /* 양끝 배치 */
        padding: 0 20px;
    }

    .logo {
        font-weight: 900;
        font-size: 24px;
        color: #6c5ce7;
        text-decoration: none;
    }

    .search-bar {
        flex: 1;
        max-width: 400px;
        margin: 0 20px;
    }

    .search-bar input {
        width: 100%;
        padding: 10px 15px;
        border-radius: 20px;
        border: 1px solid #dee2e6;
        background: #f8f9fa;
        outline: none;
    }

    .search-bar input:focus {
        border-color: #a29bfe;
    }

    .nav-menu {
        display: flex;
        align-items: center;
    }

    .nav-menu a {
        margin-left: 20px;
        text-decoration: none;
        color: #212529;
        font-weight: 600;
        font-size: 14px;
    }

    .logout-btn {
        background: none;
        border: none;
        padding: 0;
        margin-left: 20px;
        font-size: 14px;
        font-weight: 600;
        color: #212529;
        cursor: pointer;
    }

    .nav-menu a:hover, .logout-btn:hover {
        color: #8c7ae6;
    }

    /* --- 2층: 과목별 카테고리 --- */
    .nav-bottom {
        border-top: 1px solid #f1f3f5;
        background-color: #fff;
    }

    .category-list {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;      /* 카테고리들도 가로로 배치 */
        justify-content: center;
        gap: 100px;
        padding: 0 20px;
        list-style: none;   /* 앞에 붙는 불릿(점) 제거 */
    }

    .category-list li {
        white-space: nowrap;
    }

    .category-list a {
        display: block;
        padding: 12px 0;
        text-decoration: none;
        color: #495057;
        font-weight: 600;
        font-size: 17px;
        transition: color 0.2s;
    }

    .category-list a:hover {
        color: #6c5ce7; 
    }
    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #fff;
        min-width: 150px;
        box-shadow: 0px 8px 16px rgba(0,0,0,0.1);
        padding: 10px 0;
        list-style: none;
        z-index: 1001;
        border-radius: 8px;
        border: 1px solid #f1f3f5;
        left: 50%;
        transform: translateX(-50%);
    }

    .dropdown-content li a {
        padding: 10px 20px !important;
        font-size: 15px !important;
        text-align: center !important;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }
</style>

<header>
    <div class="nav-top">
        <a href="/" class="logo">TiKiTaKa</a>
        
        <div class="search-bar">
            <form action="/search/" method="get">
                <input type="text" name="q" placeholder="배우고 싶은 것을 검색해 보세요" value="{{ request.GET.q }}">
            </form>
        </div>

        {% if user.is_anonymous %}
        <nav class="nav-menu">
            <a href="{% url 'common:signup' %}">회원가입</a>
            <a href="{% url 'common:login' %}">로그인</a>
        </nav>
        {% else %}
        <nav class="nav-menu">
            <a href="{% url 'common:mypage' %}">내 페이지</a>
            <form action="{% url 'common:logout' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="logout-btn">로그아웃</button>
            </form>
        </nav>
        {% endif %}
    </div>

    <div class="nav-bottom">
        <ul class="category-list">
            <li>
                <div class="dropdown">
                    <a href="{% url 'Board:notice_list' %}" class="dropbtn">학원안내</a>
                    <ul class="dropdown-content">
                        <li><a href="{% url 'Board:notice_list' %}">공지사항</a></li>
                        <li><a href="{% url 'Board:community_list' %}">게시판</a></li>
                    </ul>
                </div>
            </li>
            <li><a href="/?show=all">전체</a></li>
            <li><a href="/?subject=국어">국어</a></li>
            <li><a href="/?subject=수학">수학</a></li>
            <li><a href="/?subject=영어">영어</a></li>
            <li><a href="/?subject=사회">사회</a></li>
            <li><a href="/?subject=과학">과학</a></li>
            <li><a href="/?subject=기타">기타</a></li>
        </ul>
    </div>
</header>