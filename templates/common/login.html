{% extends "board_base.html" %}

{% block content %}
<style>
    /* ìƒë‹¨ ë©”ë‰´ë‚˜ í‘¸í„° ë“±ì„ ì œì™¸í•œ ë©”ì¸ ì˜ì—­ì„ í°ìƒ‰ìœ¼ë¡œ ë®ê¸° */
    #login-page-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffffff; /* ì™„ì „ í°ìƒ‰ */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999; /* ëª¨ë“  ê²ƒë³´ë‹¤ ìœ„ì— ìœ„ì¹˜ */
    }

    .login-box {
        background: #fff;
        width: 380px;
        padding: 40px;
        border: 1px solid #eee; /* ì‚´ì§ í…Œë‘ë¦¬ */
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        position: relative;
    }

    .logo-area {
        text-align: center;
        color: #6c5ce7;
        font-size: 28px;
        font-weight: 900;
        margin-bottom: 30px;
        letter-spacing: -1px;
    }

    /* ğŸ’¡ input-groupì— position: relativeë¥¼ ì£¼ì–´ì•¼ ëˆˆ ì•„ì´ì½˜ì´ input ì•ˆì— ì˜ˆì˜ê²Œ ë“¤ì–´ê°‘ë‹ˆë‹¤ */
    .input-group { 
        margin-bottom: 20px; 
        position: relative; 
    }
    
    .input-group input {
        width: 100%;
        box-sizing: border-box; /* íŒ¨ë”© ë•Œë¬¸ì— ì‚ì ¸ë‚˜ê°€ëŠ” ê²ƒ ë°©ì§€ */
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 15px;
    }

    /* ğŸ’¡ ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°(ëˆˆ) ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
    .eye-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: #888;
    }

    .login-btn {
        width: 100%;
        background-color: #6c5ce7;
        color: #fff;
        border: none;
        padding: 16px;
        border-radius: 8px;
        font-weight: bold;
        font-size: 16px;
        cursor: pointer;
        transition: 0.3s;
        margin-bottom: 20px; /* ë²„íŠ¼ ì•„ë˜ ì—¬ë°± ì¶”ê°€ */
    }

    .login-btn:hover { background-color: #584ac2; }

    /* ì„œë¸Œ ë§í¬ ì •ë ¬ */
    .sub-links {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .sub-links a {
        color: #888;
        text-decoration: none;
        font-size: 14px;
    }

    .sub-links a:hover { color: #6c5ce7; }

    /* ë‹«ê¸° ë²„íŠ¼ (ë‚˜ê°€ê¸°) */
    .close-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        font-size: 20px;
        color: #ccc;
        cursor: pointer;
    }
</style>

<div id="login-page-wrapper">
    <div class="login-box">
        <button type="button" class="close-btn" onclick="location.href='{% url 'Board:community_list' %}'">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <div class="logo-area">TiKiTaKa</div>

        <form action="{% url 'common:login' %}" method="POST" autocomplete="off">
            {% csrf_token %}
            
            {% if form.errors %}
                <p class="text-danger small text-center mb-3">ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            {% endif %}

            <input type="text" name="fakeusernameremembered" style="display:none">
            <input type="password" name="fakepasswordremembered" style="display:none">

            <div class="input-group">
                <input
                    type="text"
                    name="username"
                    placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                    value="{{ form.username.value|default_if_none:'' }}"
                    required
                    autocomplete="username"
                    autocapitalize="none"
                    spellcheck="false"
                >
            </div>

            <div class="input-group">
                <input
                    id="passwordInput"
                    type="password"
                    name="password"
                    placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                    required
                    autocomplete="current-password"
                >
                <i id="togglePw" class="fa-regular fa-eye eye-icon" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°"></i>
            </div>

            <button type="submit" class="login-btn">ë¡œê·¸ì¸</button>
        </form>

        <div class="sub-links">
            <a href="{% url 'common:find_username' %}">ì•„ì´ë”” ì°¾ê¸°</a>
            <span style="color: #ddd;">|</span>
            <a href="{% url 'common:password_reset' %}">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
        </div>

        <div class="text-center" style="font-size: 14px; color: #888;">
            ì•„ì§ íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? 
            <a href="{% url 'common:signup' %}" style="color: #6c5ce7; font-weight: bold; text-decoration: none;">íšŒì›ê°€ì…</a>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const togglePw = document.getElementById('togglePw');
        const passwordInput = document.getElementById('passwordInput');

        if (togglePw && passwordInput) {
            togglePw.addEventListener('click', function() {
                // typeì´ passwordë©´ textë¡œ, textë©´ passwordë¡œ ë°”ê¿‰ë‹ˆë‹¤.
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                // í°íŠ¸ì–´ì¸ ì•„ì´ì½˜ ëª¨ì–‘ì„ ë°”ê¿‰ë‹ˆë‹¤ (ëˆˆ ê°ê¸°/ëœ¨ê¸°)
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });
        }
    });
</script>
{% endblock %}