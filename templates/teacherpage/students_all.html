{% extends "base.html" %}
{% load static teacher_extras %}

{% block title %}ì „ì²´ ìˆ˜ê°•ìƒ ëª©ë¡{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'teacherpage/css/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'teacherpage/css/students_all.css' %}">
{% endblock %}

{% block content %}
<div class="profile-container surface">

  <div class="students-head">
    <div class="section-header" style="margin:0;">
      <span class="section-title">ğŸ‘¥ ì „ì²´ ìˆ˜ê°•ìƒ(ì¤‘ë³µ ì œì™¸)</span>
      <span class="muted students-count">ì´ {{ student_count }}ëª…</span>
    </div>

    <div class="students-controls">
      <input id="studentSearch" class="students-search" type="text" placeholder="ì´ë¦„/ì•„ì´ë””/ì´ë©”ì¼ ê²€ìƒ‰">
      <a class="btn-outline" href="{% url 'teacherpage:dashboard' %}">â† ëŒ€ì‹œë³´ë“œ</a>
    </div>
  </div>

  {% if students %}
    <div class="students-list" id="studentsList">
      {% for s in students %}
        <div class="student-card" data-key="{{ s.username }} {{ s.first_name }} {{ s.email }}">
          <div class="student-left">
            <div class="student-name">
              {{ s.first_name|default:s.username }}
              <span class="student-username muted">@{{ s.username }}</span>
            </div>

            {% if s.email %}
              <div class="student-email muted">{{ s.email }}</div>
            {% endif %}

            <div class="student-courses">
              {% for c in courses_by_student|get_item:s.id %}
                <a class="pill pill-link" href="{% url 'teacherpage:course_students' c.id %}" title="í•´ë‹¹ ê°•ì˜ ìˆ˜ê°•ìƒ ë³´ê¸°">
                  {{ c.title }}
                </a>
              {% empty %}
                <span class="pill">ìˆ˜ê°• ê°•ì˜ ì—†ìŒ</span>
              {% endfor %}
            </div>
          </div>

          <div class="student-actions">
            {% if s.unread_total|default:0 > 0 %}
              <span class="pill pill-alert">ì•ˆì½ìŒ {{ s.unread_total }}</span>
            {% else %}
              <span class="pill">ì•ˆì½ìŒ 0</span>
            {% endif %}

            {% if s.has_chat %}
              <span class="pill pill-ok">DM ê°€ëŠ¥</span>
            {% else %}
              <span class="pill">ë¬¸ì˜ ì—†ìŒ</span>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-box soft">
      <p class="muted">ì•„ì§ ìˆ˜ê°•ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>
  {% endif %}

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'teacherpage/js/students_all.js' %}"></script>
{% endblock %}