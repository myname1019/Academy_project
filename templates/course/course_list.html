{% extends 'base.html' %}

{% block title %}ê°•ì˜ ëª©ë¡{% endblock %}

{% block content %}
<style>
body { background: #f5f7fa; }

.course-container { max-width: 1200px; margin: 60px auto; padding: 0 20px; }

.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
}

.page-title { font-size: 28px; font-weight: 700; margin: 0; color: #212529; }

.btn-create {
    background-color: #00c471;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
}

.course-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 25px;
}

.course-card {
    background: #ffffff;
    border-radius: 14px;
    overflow: hidden;
    transition: 0.25s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
}

.thumbnail {
    height: 160px;
    background: linear-gradient(135deg, #4e73df, #1cc88a);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 22px;
    font-weight: bold;
}

.course-body { padding: 20px; flex-grow: 1; }

.category-label {
    font-size: 12px;
    font-weight: 600;
    color: #1c7ed6;
    margin-bottom: 6px;
}

.course-title { font-size: 18px; font-weight: 600; margin-bottom: 10px; }

.course-desc { font-size: 14px; color: #868e96; margin-bottom: 20px; }

.course-footer {
    padding: 15px 20px;
    background: #f8f9fc;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.price { font-weight: bold; color: #4e73df; font-size: 16px; }

.admin-actions a { font-size: 13px; margin-right: 8px; }

.btn-delete { background: none; border: none; color: #fa5252; cursor: pointer; font-size: 13px; }

.empty-box { text-align: center; padding: 80px; background: white; border-radius: 12px; }
</style>

<div class="course-container">
    <div class="page-header">
        <h2 class="page-title">ğŸ“š ì „ì²´ ê°•ì˜</h2>
        <a href="{% url 'course:course_create' %}" class="btn-create">ìƒˆ ê°•ì˜ ë“±ë¡</a>
    </div>

    {% if courses %}
    <div class="course-grid">
        {% for course in courses %}
        <div class="course-card">

            <a href="{% url 'course:course_detail' pk=course.id %}">
                <div class="thumbnail">
                    ğŸ¬ {{ course.title|truncatechars:10 }}
                </div>
            </a>

            <div class="course-body">
                <!-- ğŸ”½ ì¹´í…Œê³ ë¦¬ í‘œì‹œ -->
                <div class="category-label">
                    {{ course.get_category_display }}
                </div>

                <div class="course-title">
                    <a href="{% url 'course:course_detail' pk=course.id %}">
                        {{ course.title }}
                    </a>
                </div>

                <div class="course-desc">
                    {{ course.description|truncatechars:80 }}
                </div>
            </div>

            <div class="course-footer">
                <div class="price">
                    {% if course.price == 0 %}ë¬´ë£Œ{% else %}â‚© {{ course.price }}{% endif %}
                </div>

                <!-- ğŸ” ì‘ì„±ìë§Œ ë³´ì´ê²Œ -->
                {% if request.user == course.teacher %}
                <div class="admin-actions">
                    <a href="{% url 'course:course_update' pk=course.id %}">ìˆ˜ì •</a>

                    <form action="{% url 'course:course_delete' pk=course.id %}"
                          method="post" style="display:inline;"
                          onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                        {% csrf_token %}
                        <button type="submit" class="btn-delete">ì‚­ì œ</button>
                    </form>
                </div>
                {% endif %}
            </div>

        </div>
        {% endfor %}
    </div>
    {% else %}
        <div class="empty-box">
            ì•„ì§ ë“±ë¡ëœ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤ ğŸš€
        </div>
    {% endif %}
</div>
{% endblock %}